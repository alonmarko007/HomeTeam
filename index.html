    function updateChildUI() {
        const c = db.children[curIdx];
        document.getElementById('c-name').innerText = c.name;
        document.getElementById('c-pts').innerText = `â­ ${c.points}`;
        document.getElementById('c-avatar').innerHTML = c.img ? `<img src="${c.img}">` : `<span>${c.name}</span>`;
        
        const hr = new Date().getHours();
        
        const tasks = db.tasks.filter(t => {
            // ×œ×•×’×™×§×” ××¢×•×“×›× ×ª:
            // 1. ××©×™××•×ª ×‘×•× ×•×¡ ×ª××™×“ ××•×¤×™×¢×•×ª (××œ× ×× ×‘×•×¦×¢×• ×›×‘×¨ ×¢×œ ×™×“×™ ××™×©×”×•)
            if (t.type === 'bonus') return !db.history.some(h => h.taskId === t.id);
            
            // 2. ××©×™××•×ª ×‘×•×§×¨ ××•×¤×™×¢×•×ª ×¢×“ 15:00
            if (t.type === 'morning') return hr < 15 && !(c.doneToday && c.doneToday.includes(t.id));
            
            // 3. ××©×™××•×ª ×¢×¨×‘ ××•×¤×™×¢×•×ª ×”×—×œ ×-12:00
            if (t.type === 'evening') return hr >= 12 && !(c.doneToday && c.doneToday.includes(t.id));
            
            return true;
        }).filter(t => !db.pending.some(p => p.childName === c.name && p.taskId === t.id));

        document.getElementById('child-tasks').innerHTML = tasks.length > 0 ? tasks.map(t => `
            <div class="item-row ${t.type === 'bonus' ? 'bonus-task' : ''}" onclick="reqTask(${t.id},'${t.name}',${t.points})">
                <span>
                    ${t.type === 'morning' ? 'â˜€ï¸ ' : t.type === 'evening' ? 'ğŸŒ™ ' : 'âš¡ '}
                    ${t.name}
                </span>
                <b style="color:var(--p);">${t.points}â­</b>
            </div>`).join('') : "<div style='padding:20px; color:#636e72;'>×¡×™×™××ª ××ª ×›×œ ×”××©×™××•×ª ×œ×–××Ÿ ×–×”! ğŸŒŸ</div>";
    }
